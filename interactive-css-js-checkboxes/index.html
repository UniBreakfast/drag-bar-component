<!DOCTYPE html>
<html lang="en">

<head id="head">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">

  <link rel="stylesheet" href="reset.css">
  <link rel="stylesheet" href="drag-bar.css">
  <link rel="stylesheet" href="style.css">

  <script src="script.js" defer></script>
  <!-- <script src="script00000.js" defer></script> -->
  <!-- <script src="script10000.js" defer></script> -->
  <!-- <script src="script11000.js" defer></script> -->
  <!-- <script src="script11100.js" defer></script> -->
  <!-- <script src="script11110.js" defer></script> -->
  <!-- <script src="script11111.js" defer></script> -->
  <!-- <script src="app.js" type="module"></script> -->

  <title>Draggable bar</title>
</head>

<body id="body">
  <form>
    <label>
      <input type="checkbox" id="reset" checked>
      reset browser default styles
    </label>

    <hr>

    <fieldset>
      <pre
        ><code
          ><b>drag-bar</b> {
            <label
              ><input type="checkbox" id="bar-fix" checked
              ><b>position: fixed;</b
            ></label
            
            ><label
              ><input type="checkbox" id="bar-width" checked
              ><b>width: 30vmin;</b
            ></label
  
            ><label
              ><input type="checkbox" id="bar-height" checked
              ><b>height: 12vmin;</b
            ></label
  
            ><label
              ><input type="checkbox" id="bar-noselect" checked
              ><b>user-select: none;</b
            ></label
  
            ><label
              ><input type="checkbox" id="bar-pad" checked
              ><b>padding: 6px 40px;</b
            ></label
          ><br>}
        </code>
      </pre>

      <pre
        ><code
          ><b>wrap-list</b> {
            <label
              ><input type="checkbox" id="child-bg" checked
              ><b>background: wheat;</b
            ></label
            
            ><label
              ><input type="checkbox" id="child-height" checked
              ><b>height: 100%;</b
            ></label
  
            ><label
              ><input type="checkbox" id="child-overhide" checked
              ><b>overflow: hidden</b
            ></label
          ><br>}
        </code>
      </pre>

      <pre
        ><code id="boxContainer"
          ><b>JS handlers</b>:
            <label
              ><input type="checkbox" id="jsClick" checked
              ><b>require mousedown to drag / mouseup to drop</b
            ></label
            
            ><label
              ><input type="checkbox" id="jsTarget" checked
              ><b>check if bar is the target</b
            ></label
            
            ><label
              ><input type="checkbox" id="jsOffset" checked
              ><b>take offset into account</b
            ></label
  
            ><label
              ><input type="checkbox" id="jsCollide" checked
              ><b>handle border collision</b
            ></label
  
            ><label
              ><input type="checkbox" id="jsResize" checked
              ><b>push by border on viewport resize</b
            ></label
          >
        </code>
      </pre>
    </fieldset>
  </form>

  <pre
    ><code id="codeBlock">
      const normalize = (value, max) => Math.max(0, Math.min(max, value))
  
      bar.onmousedown = e0 => {
        if (e0.target == bar) onmousemove = e => {
          bar.style.left = normalize(e.clientX - e0.offsetX, innerWidth - bar.offsetWidth) + 'px'
          bar.style.top = normalize(e.clientY - e0.offsetY, innerHeight - bar.offsetHeight) + 'px'
        }
      }
      onmouseup = () => onmousemove = null
      
      onresize = () => {
        bar.style.left = normalize(bar.offsetLeft, innerWidth - bar.offsetWidth) + 'px'
        bar.style.top = normalize(bar.offsetTop, innerHeight - bar.offsetHeight) + 'px'
      }
    </code>
  </pre>

  <div>
    <drag-bar id="bar">
      <div>
        Any content here. Probably some indicators, messages or buttons. 
        Something you don't need to select though.
      </div>
    </drag-bar>
  </div>
</body>

</html>
